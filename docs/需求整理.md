# 项目目标
- 构建一个基于 PyQt 的标签与图片校准工具，便于查看、翻译和维护图片标签。

# 输入与输出
- **输入目录**：用户选择的文件夹（默认 `data/poren`），包含图片与同名 `.txt` 标签文件。
- **输出文件**：对标签文件的直接覆盖保存，同时生成 `.bak` 备份并支持撤销到初始版本。

# 功能需求
- **文件加载**
  - 启动时提示选择目录并自动匹配图片与标签文件。
  - 支持手动选择单个标签文件。
  - 支持多种图片格式（`.png`, `.jpg`, `.jpeg`, `.webp` 等），标签文件后缀可配置（默认 `.e621.txt`）。
- **标签视图**
  - 左侧上半区显示英文 tag，下半区显示中文翻译；两侧条目一一对应、可编辑。
  - 编辑任意一侧的 tag（增删改）须自动同步到另一侧。
  - 提供多级撤销/反撤销（快捷键 `Ctrl+Z` / `Ctrl+Y`）以及一键恢复初始状态。
- **翻译策略**
  - 优先调用在线免费翻译 API。
  - 网络失败时退回到本地翻译方案（Argos Translate）或内置词典。
  - 支持缓存翻译结果，提高响应速度。
- **图片视图**
  - 右侧显示当前图片，使用鼠标滚轮缩放，比例限制在 30%–300%。
  - 保持平滑缩放、尽量居中显示。
- **文件导航**
  - 使用键盘左右方向键在同目录内的文件组间切换。
  - 切换前自动保存当前修改并处理缺失文件场景。
  - 状态栏提示当前文件名、缩放比例、翻译模式等信息。

# 约束与假设
- 环境允许联网；若不可用则使用本地翻译备选方案。
- 文件夹可能包含缺失或不匹配的标签文件，需要提供提示与处理策略。
- 需保留原始标签内容供恢复使用，同时支持 `.bak` 文件在磁盘上持久保存。
